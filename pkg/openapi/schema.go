// Package openapi provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/deepmap/oapi-codegen version v1.16.2 DO NOT EDIT.
package openapi

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
	externalRef0 "github.com/unikorn-cloud/core/pkg/openapi"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"+ifRvrHu78O6Dw//GwAA//9RsMhvMGAAAA==",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	pathPrefix := path.Dir(pathToFile)

	for rawPath, rawFunc := range externalRef0.PathToRawSpec(path.Join(pathPrefix, "https://raw.githubusercontent.com/unikorn-cloud/core/main/pkg/openapi/common.spec.yaml")) {
		if _, ok := res[rawPath]; ok {
			// it is not possible to compare functions in golang, so always overwrite the old value
		}
		res[rawPath] = rawFunc
	}
	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
